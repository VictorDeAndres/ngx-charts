(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{282:function(module,exports){},432:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=432},434:function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),core=__webpack_require__(1),d3=__webpack_require__(56),ngx_chart_common=__webpack_require__(80);class circular_graphs_class_CircularGraphs{constructor(){this.circularMeasures=new ngx_chart_common.a}drawCircle(data,graphElement){data=this.defaultValues(data);const circle=d3.a().innerRadius(3*data.radius/5).outerRadius(data.radius).startAngle(this.circularMeasures.toRadians(data.startAngle)).endAngle(this.circularMeasures.toRadians(data.endAngle)).padAngle(()=>data.padding?.03:0);return graphElement.svgContainer.append("g").attr("transform",`translate(${graphElement.width/2}, ${graphElement.height/2})`).attr("id",data.id).append("path").attr("fill",data.color).style("opacity",data.opacity).attr("d",circle),circle}defaultValues(data){return data.opacity=data.opacity?data.opacity:1,data}}var _a,doughnut_graph_component_a,_b,iDoughnut=__webpack_require__(282);class doughnut_class_DoughnutGraph extends circular_graphs_class_CircularGraphs{constructor(){super()}scaleData(data){const sumData=data.reduce((prev,curr)=>prev+curr),interValue=d3.b().domain([0,sumData]).range([0,100]);return data.map(value=>interValue(value))}checkGraphDataColors(){const colors=new ngx_chart_common.b;return this.graphData.colors?this.graphData.colors.length===this.graphData.values.length?this.graphData.colors:[...this.graphData.colors,...colors.generateRandomPallete(this.graphData.values.length-this.graphData.colors.length||0)]:colors.generateRandomPallete(this.graphData.values.length)}drawSegment(startAngle,endAngle,idx){const currenData={id:`${this.graphElement.uid}__${idx}`,radius:this.minSize/2,startAngle:startAngle,endAngle:endAngle,color:this.graphData.colors[idx],padding:this.graphData.padding},arc=this.drawCircle(currenData,this.graphElement);this.graphData.labels&&"internal"===this.graphData.labels.position&&this.appendIntLabels(`${this.graphElement.uid}__${idx}`,arc.centroid(),idx),this.graphData.labels&&"external"===this.graphData.labels.position&&this.appendExtLabels(currenData,`${this.graphElement.uid}__${idx}`,arc.centroid(),idx)}appendIntLabels(arcId,centro,idx){this.graphElement.svgContainer.select(`#${arcId}`).append("text").attr("x",centro[0]).attr("y",centro[1]).attr("dy","0.33em").attr("dx","-0.33em").style("fill","white").text(this.graphData.labels.titles[idx])}appendExtLabels(data,arcId,centro,idx){const edgeCentro=function calculateEdgePos(dataArc){return d3.a().innerRadius(dataArc.radius).outerRadius(dataArc.radius).startAngle(this.circularMeasures.toRadians(dataArc.startAngle)).endAngle(this.circularMeasures.toRadians(dataArc.endAngle)).centroid()}.call(this,data),extCentro=function calculateExternalPos(dataArc){return d3.a().innerRadius(dataArc.radius).outerRadius(dataArc.radius+20).startAngle(this.circularMeasures.toRadians(dataArc.startAngle)).endAngle(this.circularMeasures.toRadians(dataArc.endAngle)).centroid()}.call(this,data),paddingHorizontalLabel=extCentro[0]>=0?extCentro[0]+4:extCentro[0]-4,paddingVerticalLabel=extCentro[1]+4;this.graphElement.svgContainer.select(`#${arcId}`).append("line").style("stroke","black").style("opacity",.7).attr("x1",edgeCentro[0]).attr("y1",edgeCentro[1]).attr("x2",extCentro[0]).attr("y2",extCentro[1]),this.graphElement.svgContainer.select(`#${arcId}`).append("text").attr("text-anchor",()=>extCentro[0]>0?"start":"end").attr("transform",`translate(${paddingHorizontalLabel}, ${paddingVerticalLabel})`).text(this.graphData.labels.titles[idx])}}tslib_es6.b([Object(core.Input)(),tslib_es6.d("design:type","function"==typeof(_a=void 0!==iDoughnut.Doughnut&&iDoughnut.Doughnut)?_a:Object)],doughnut_class_DoughnutGraph.prototype,"graphData",void 0),__webpack_require__.d(__webpack_exports__,"a",(function(){return doughnut_graph_component_DoughnutGraphComponent}));let doughnut_graph_component_DoughnutGraphComponent=class DoughnutGraphComponent extends doughnut_class_DoughnutGraph{constructor(elementRef,circularMeasures){super(),this.elementRef=elementRef,this.circularMeasures=circularMeasures}ngOnChanges(changes){changes.graphData.previousValue&&d3.c(`#svg-${this.currentElementId}`).remove(),this.graphElement=new ngx_chart_common.c(this.elementRef),this.currentElementId=this.graphElement.uid,this.minSize=this.circularMeasures.calcRadius(this.graphElement.width,this.graphElement.height),this.minSize=this.graphData.labels&&"external"===this.graphData.labels.position?this.minSize-25:this.minSize,this.segmentsDegree=this.scaleData(this.graphData.values).map(value=>this.circularMeasures.arcValue(value)),this.graphData.colors=this.checkGraphDataColors(),this.segmentsDegree.map((arc,idx)=>{const startAngle=0===idx?0:this.segmentsDegree.slice(0,idx).reduce((curr,prev)=>curr+prev),endAngle=idx===this.segmentsDegree.length?360:this.segmentsDegree.slice(0,idx+1).reduce((curr,prev)=>curr+prev);this.drawSegment(startAngle,endAngle,idx)})}};doughnut_graph_component_DoughnutGraphComponent=tslib_es6.b([Object(core.Component)({selector:"ngl-doughnut",template:"",styles:[],providers:[ngx_chart_common.a]}),tslib_es6.d("design:paramtypes",["function"==typeof(doughnut_graph_component_a=void 0!==core.ElementRef&&core.ElementRef)?doughnut_graph_component_a:Object,"function"==typeof(_b=void 0!==ngx_chart_common.a&&ngx_chart_common.a)?_b:Object])],doughnut_graph_component_DoughnutGraphComponent)},479:function(module,exports,__webpack_require__){__webpack_require__(480),__webpack_require__(638),module.exports=__webpack_require__(639)},540:function(module,exports){},639:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(151);Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(906),module)}.call(this,__webpack_require__(351)(module))},906:function(module,exports,__webpack_require__){var map={"./doughnut.stories.ts":907};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=906},907:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"DoughnutData",(function(){return DoughnutData})),__webpack_require__.d(__webpack_exports__,"DoughnutDataRandomColors",(function(){return DoughnutDataRandomColors})),__webpack_require__.d(__webpack_exports__,"DoughnutDataInternalLabel",(function(){return DoughnutDataInternalLabel})),__webpack_require__.d(__webpack_exports__,"DoughnutDataExternalLabel",(function(){return DoughnutDataExternalLabel}));var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(151),_projects_doughnut_graph_src_lib_doughnut_graph_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(434);__webpack_require__(908);const DoughnutData={values:[32,24,21,46],colors:["red","blue","yellow","green"],padding:!0},DoughnutDataRandomColors={values:[32,24,21,46],colors:["red"]},DoughnutDataInternalLabel={values:[32,24,21,46],colors:["#F2CB05","#426AF4","#BF1797","#ABBF17"],labels:{position:"internal",titles:["A","B","C","D"]}},DoughnutDataExternalLabel={values:[32,24,21,46],colors:["#F2CB05","#426AF4","#BF1797","#ABBF17"],labels:{position:"external",titles:["Alfa","Bravo","Charlie","Delta"]}};Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.storiesOf)("Circular Graphs/Doughnut",module).addDecorator(Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({declarations:[_projects_doughnut_graph_src_lib_doughnut_graph_component__WEBPACK_IMPORTED_MODULE_1__.a]})).add("default",()=>({template:'<ngl-doughnut\n        style="width: 300px; height: 200px; display: block;"\n        [graphData]="DoughnutData"></ngl-doughnut>',props:{DoughnutData:DoughnutData}}),{notes:{}}).add("random colors",()=>({template:'<ngl-doughnut\n        style="width: 300px; height: 200px; display: block;"\n        [graphData]="DoughnutDataRandomColors"></ngl-doughnut>',props:{DoughnutDataRandomColors:DoughnutDataRandomColors}}),{notes:{}}).add("internal label",()=>({template:'<ngl-doughnut\n        style="width: 300px; height: 200px; display: block;"\n        [graphData]="DoughnutDataInternalLabel"></ngl-doughnut>',props:{DoughnutDataInternalLabel:DoughnutDataInternalLabel}}),{notes:{}}).add("external label",()=>({template:'<ngl-doughnut\n        style="width: 300px; height: 200px; display: block;"\n        [graphData]="DoughnutDataExternalLabel"></ngl-doughnut>',props:{DoughnutDataExternalLabel:DoughnutDataExternalLabel}}),{notes:{}})}.call(this,__webpack_require__(351)(module))},908:function(module,exports,__webpack_require__){var content=__webpack_require__(909);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(911)(content,options);content.locals&&(module.exports=content.locals)},909:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(910);(exports=module.exports=___CSS_LOADER_API_IMPORT___(!1)).push([module.i,"@import url(https://fonts.googleapis.com/css?family=Roboto&display=swap);"]),exports.push([module.i,"body {\n  font-family: 'Roboto', sans-serif;\n  font-size: 14px;\n}",""])}},[[479,1,2]]]);
//# sourceMappingURL=main.7339e60b14291b3a13ed.bundle.js.map